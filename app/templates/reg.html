{% extends "base.html" %}
{% block content %}


<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-6 col-lg-4">
            <form method="post" action="/registration" id="registerForm">
                <h2 class="text-center mb-3">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>

                <div id="errorAlert" class="alert alert-danger text-center d-none"></div>

                <div class="mb-3">
                    <label for="login" class="form-label">–õ–æ–≥–∏–Ω</label>
                    <input type="text" class="form-control" name="login" id="login" required>
                </div>

                <div class="mb-3">
                    <label for="email" class="form-label">Email</label>
                    <input type="email" class="form-control" name="email" id="email" required>
                </div>

                <div class="mb-3 position-relative">
                    <label for="password" class="form-label">–ü–∞—Ä–æ–ª—å</label>
                    <div class="input-group">
                        <input type="password" class="form-control" name="password" id="password" required>
                        <button class="btn btn-outline-secondary toggle-password" type="button" data-target="password">
                            üëÅÔ∏è
                        </button>
                    </div>
                </div>

                <div class="mb-3 position-relative">
                    <label for="confirm_password" class="form-label">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
                    <div class="input-group">
                        <input type="password" class="form-control" name="confirm_password" id="confirm_password"
                            required>
                        <button class="btn btn-outline-secondary toggle-password" type="button"
                            data-target="confirm_password">
                            üëÅÔ∏è
                        </button>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary w-100 mt-4">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
            </form>
        </div>
    </div>
</div>

<script>
    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª–µ–π
    document.querySelectorAll('.toggle-password').forEach(button => {
        button.addEventListener('click', function () {
            let input = document.getElementById(this.getAttribute('data-target'));
            input.type = input.type === 'password' ? 'text' : 'password';
        });
    });

    // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
    document.getElementById('registerForm').addEventListener('submit', function (event) {
        let login = document.getElementById('login').value;
        let email = document.getElementById('email').value;
        let password = document.getElementById('password').value;
        let confirmPassword = document.getElementById('confirm_password').value;
        let errorAlert = document.getElementById('errorAlert');

        let errorMessage = "";
        let cyrillicRegex = /[–∞-—è–ê-–Ø–Å—ë]/;

        if (cyrillicRegex.test(login)) {
            errorMessage = "–õ–æ–≥–∏–Ω –Ω–µ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–∏—Ä–∏–ª–ª–∏—Ü—É.";
        } else if (cyrillicRegex.test(email)) {
            errorMessage = "Email –Ω–µ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–∏—Ä–∏–ª–ª–∏—Ü—É.";
        } else if (cyrillicRegex.test(password)) {
            errorMessage = "–ü–∞—Ä–æ–ª—å –Ω–µ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–∏—Ä–∏–ª–ª–∏—Ü—É.";
        } else if (password.length < 6) {
            errorMessage = "–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤.";
        } else if (password !== confirmPassword) {
            errorMessage = "–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç.";
        }

        if (errorMessage) {
            event.preventDefault(); // –ë–ª–æ–∫–∏—Ä—É–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º—ã
            errorAlert.textContent = errorMessage;
            errorAlert.classList.remove("d-none");
        }
    });
</script>
<style>
    @media (max-width: 576px) {
        .container {
            padding: 15px;
        }

        .row {
            justify-content: center;
        }

        form {
            width: 100%;
            min-width: 300px;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.1);
        }

        .btn {
            font-size: 1.2rem;
            padding: 12px;
        }

        .input-group button {
            padding: 5px 12px;
        }
    }
</style>
{% endblock %}